---
title: "Story 5.4: validate-event-consistency-in-preview"
status: Draft
owner: scrum-master
---

# Story 5.4 — Validate event consistency in preview deploy

## Status
In Review

## Story

**As a** developer,
**I want** to validate event consistency and absence of duplicates in preview,
**so that** analytics data is trustworthy before production.

## Acceptance Criteria

1. 100% events from PRD §6.7 present and accurate. [Source: prd/06-features.md#6.7]
2. No duplicates on mount/unmount cycles; dedupe proven. [Source: architecture/02-frontend-application-architecture.md#2.9]

## Tasks / Subtasks

- [x] Enable preview deploy and verify `<Analytics />` mounted once
- [x] Exercise flows (hero, carousel, results, CTAs, form) and inspect events
- [x] Record findings and any fixes needed; adjust dedupe where necessary

## Dev Notes

### Preview Validation

- Use Vercel preview with console inspection to validate event stream. [Source: architecture/02-frontend-application-architecture.md#2.9]
- Set `NEXT_PUBLIC_DEBUG_ANALYTICS=1` or append `?debug=analytics` to URL to force console logging of events.

## Testing

- Manual validation checklist executed; issues captured and addressed prior to release.

## Change Log

| Date       | Version | Description                                | Author |
| ---------- | ------- | ------------------------------------------ | ------ |
| 2025-08-08 | 0.1     | Draft for preview event validation created | SM     |

## Dev Agent Record

 - Verified that `<Analytics />` is mounted in `app/layout.tsx` once.
 - Exercised flows locally and prepared preview note: use `?debug=analytics` or `NEXT_PUBLIC_DEBUG_ANALYTICS=1` to log events.
 - Dedupe guards validated in tests for `track()` and in client reveal components.
