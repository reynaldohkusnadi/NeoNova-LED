---
title: "Story 5.3: add-server-logs-for-server-action-failures"
status: Draft
owner: scrum-master
---

# Story 5.3 â€” Add server logs for Server Action failure path

## Status

Approved

## Story

**As a** developer,
**I want** to add structured server logs for the `submitLead` failure path,
**so that** we can diagnose email delivery issues and latency regressions.

## Acceptance Criteria

1. Failure logs capture error class and elapsed ms. [Source: architecture/03-backend-and-integrations.md#3.5]
2. Client remains safe; no secrets leak; user receives friendly message. [Source: architecture/03-backend-and-integrations.md#3.4]

## Tasks / Subtasks

- [ ] In `submitLead`, on catch, log `{ errorClass, elapsedMs, path: 'submitLead' }`
- [ ] Ensure logs visible in Vercel functions logs; optionally redact PII
- [ ] Emit `form_submit_error` on client path as part of integration

## Dev Notes

### Observability

- Structured logs on server failures with minimal PII. [Source: architecture/03-backend-and-integrations.md#3.5]

## Testing

- Force error path (invalid env or simulated provider error) and verify log shape.

## Change Log

| Date       | Version | Description                              | Author |
| ---------- | ------- | ---------------------------------------- | ------ |
| 2025-08-08 | 0.1     | Draft for server failure logging created | SM     |

## Dev Agent Record

To be filled by the development agent during implementation.
