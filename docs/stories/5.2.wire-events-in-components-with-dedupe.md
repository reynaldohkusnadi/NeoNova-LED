---
title: "Story 5.2: wire-events-in-components-with-dedupe"
status: Draft
owner: scrum-master
---

# Story 5.2 — Wire events in components; add dedupe on visibility events

## Status
In Review

## Story

**As a** developer,
**I want** to wire analytics events across components with dedupe guards,
**so that** events are emitted once and payloads remain consistent.

## Acceptance Criteria

1. 100% events from PRD §6.7 present and accurate. [Source: prd/06-features.md#6.7]
2. No duplicates on mount/unmount cycles. [Source: architecture/02-frontend-application-architecture.md#2.9]
3. Event payloads include common fields and contextual fields (e.g., `section`, `id`). [Source: architecture/02-frontend-application-architecture.md#2.9]

## Tasks / Subtasks

- [x] Navbar CTAs: `cta_click_primary`, `cta_click_secondary` with `{ location: 'navbar' }`
- [x] Hero: `hero_view` (first visibility)
- [x] Carousel: `carousel_view`, `carousel_card_focus` (id)
- [x] Results Band: `results_band_view`, `stat_reveal` (id)
- [x] Form: `form_open`, `form_submit_success`, `form_submit_error`; optional `whatsapp_deeplink`
- [x] Use a dedupe guard in reveal components to prevent repeated visibility events

## Dev Notes

### Central Helper

- Use `track()` for consistency and guards. [Source: architecture/02-frontend-application-architecture.md#2.9]

### Naming & Consistency

- Follow PRD §6.7 event names and payloads; add `{ section, id }` where relevant. [Source: prd/06-features.md#6.7]

## Testing

- Manual preview validation and console inspection to ensure single-fire events.

## Dev Agent Record
- Wired analytics events in `ClientHero`, `CarouselReveal`, `CardCarousel`, `ResultsBand[.client]`, `NavCtaBridge`, and `SlideOverForm` using the centralized `track()` helper and dedupe guards where appropriate.

## Change Log

| Date       | Version | Description                                       | Author |
| ---------- | ------- | ------------------------------------------------- | ------ |
| 2025-08-08 | 0.1     | Draft to wire analytics across components created | SM     |

## Dev Agent Record

To be filled by the development agent during implementation.
